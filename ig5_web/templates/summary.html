{% extends "layout.html" %}
{% import "macros.j2" as macros %}

{% set active_page = "results-" ~ year -%}
{# Competition started in 2006. Thus subtracting 2005 gives index number #}
{% set summary_number = year|int - 2005 %}
{% set summary_data = summaries.summaries[year] %}

{% block title %}Výsledky {{ summary_number }}. ročníka{% endblock %}

{% block content %}
<h1>{{ summary_number }}. ročník {% if summary_data.basic.mainSponsor %}{{ summary_data.basic.mainSponsor }}{% endif %} IG5</h1>
<div id="sub_nav">
  <a href="#basic">Základné údaje</a>
  <a href="#schools">Zúčastnené školy</a>
  <a href="#results">Výsledky</a>
  {% if summary_data.route %}
  <a href="#route">Trasa</a>
  {% endif %}
  <a href="#fotos">Fotogaléria</a>
  {% if summary_data.video %}
  <a href="#video">Video</a>
  {% endif %}
  {% if docs %}
  <a href="#downloads">Na stiahnutie</a>
  {% endif %}
  {% if summary_data.hasSpecial %}
  <a href="#special">Sprievodná akcia</a>
  {% endif %}
</div>


<h2>Základné údaje<a name="basic"></a></h2>
{% set school_count = macros.school_count_by_year(schools, year) %}
<ul>
  <li><span class="red">Dátum: </span>{{ summary_data.basic.date }} {{ year }}</li>
  <li><span class="red">Organizátor: </span>{{ summary_data.basic.organizer }}</li>
  <li><span class="red">Počet zúčastnených škôl: </span>{{ school_count }}</li>
  <li><span class="red">Počet súťažných týmov: </span>{{ summary_data.basic.teamCount }}</li>
  <li><span class="red">Celkový počet účastníkov: </span>{{ summary_data.basic.teamCount * 3 }}</li>
</ul>
{{ macros.sponsor_list_by_year(sponsors, year, summary_data.basic.sponsorsSpecial) }}


<h2>Zúčastnené školy<a name="schools"></a></h2>
{{ macros.school_list_by_country(schools, year) }}


<h2>Výsledky<a name="results"></a></h2>
<div class="results" style="width: 100%;">
  {% set float_to = "left" %}
  {% if "category1" in summary_data.results %}
    <div class="rLeft" style="float:{{ float_to }};">
      <h3>1. Kategória</h3>
      <h4>Celkový čas absolvovania trasy a jednotlivých úloh na stanoviskách s pridelenými trestnými a bonusovými minútami</h4>
      <ol>
      {% for result in summary_data.results.category1 %}
        <li>{{ result }}</li>
      {% endfor %}
      </ol>
    </div>
    {% set float_to = "right" %}
  {% endif %}

  {% if "category2" in summary_data.results %}
    <div class="rRight" style="float:{{ float_to }};">
      <h3>2. Kategória</h3>
      <h4>Kvalita a rýchlosť vykonávania úloh na stanoviskách bez ohľadu na celkový čas</h4>
      <ol>
      {% for result in summary_data.results.category2 %}
        <li>{{ result }}</li>
      {% endfor %}
      </ol>
    </div>
  {% endif %}
</div>

{% if summary_data.route %}
<h2>Trasa<a name="route"></a></h2>
<ul class="route">
  <li><span class="red">Lokalita: </span>{{ summary_data.route.location }}</li>
  <li><span class="red">Štart: </span>{{ summary_data.route.start }}</li>
  <li><span class="red">Cieľ: </span>{{ summary_data.route.finish }}</li>
  <li><span class="red">Dĺžka: </span>{{ summary_data.route.length }} km</li>
  <li><span class="red">Počet orientačných stanovísk: </span>{{ summary_data.route.orientationSiteCount }}</li>
</ul>
{{ macros.google_map() }}
{% endif %}


<h2>Fotogaléria<a name="fotos"></a></h2>
{{ macros.photo_gallery(summary_img_dir + "/" + year, photos) }}


{% if summary_data.video %}
<h2>Video<a name="video"></a></h2>
<iframe width="100%" height="550" src="{{ summary_data.video }}" frameborder="0"></iframe>
{% endif %}


{% if docs %}
<h2>Na stiahnutie<a name="downloads"></a></h2>
<ul>
{% for name, size, label in docs %}
  <li><a href="{{ url_for("static", filename="doc/" + name) }}">{{ label }} ({{ size }} mb)</a></li>
{% endfor %}
</ul>
{% endif %}


{% if summary_data.hasSpecial %}
{% include "special/summary/" ~ year ~ ".html" %}
{% endif %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  {% if summary_data.route %}
    {{
        macros.google_map_scripts(
          summary_data.route.googleMapsSettings.center|join(","),
          summary_data.route.googleMapsSettings.zoom,
          summary_data.route.points|safe,
          gmaps_api_key
        )
    }}
  {% endif %}

<!-- Fancybox -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
{% endblock %}
